<!DOCTYPE html>
<html ng-app="CRM" >
	<head>
		 <meta name="viewport" content="width=device-width, initial-scale=1">
		 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
		 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
		<script type="text/javascript" src="angular.min.js"></script>
		<script type="text/javascript" src="CRM_Client.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<link rel="stylesheet" type="text/css" href="CRM_Client.css"></link>
	</head>
	
	<body>
		<div ng-controller="CRM_controller"> 
		    
		    <div ng-show="login_page==true" id="log_in">
			
					<div class="content">
					
					  <div class="text-center">
							<div class="col-xs-3 col-md-offset-6">
							<label class="header_text form-signin-heading text-center text-primary">Please log in</label></p>
									<div class="input-group">
									    <span class="input-group-addon primary"><i class="fa fa-user fa-lg"></i></span>
										<input ng-model="UserNameLogin" class="form-control w-50 p-3"  placeholder="Enter user name" >
									</div>
									</p>
									<div class="input-group">
										<span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
										<input ng-model="PasswordLogin" type="password" class="form-control w-50 p-3"  placeholder="Enter Password">
									</div>
									</p>
								
							</div>
							
							<div class="col-xs-1 col-xs-offset-7 ">
							    </p>
								<button class="btn btn-sm  center-block "  style="font-size: 12px;  background-color: #ff6699;color: white;" ng-click="login()">Login</button>
								</p>
							</div>
							
							
							<div class="col-xs-3 col-xs-offset-6 text-primary">
								<label>Not registered yet?</label><a href="#" ng-click="temp_password_page=true;login_page=false;$scope.Admin = false;"> Sign up here</a>
							</div>

					   </div>
				   </div>	
			</div>
			
			 <div ng-show="temp_password_page==true">
			 
			    <form class="temp_password_div">
					<div class="font-weight-bold text-center">
						<div class="text-primary">
								<label class="header_text text-center text-info" ng-show="first_load==true||not_first_load==true" >Hello Administrator</label></br>
								<label class="temp_password_text text-center" ng-show="not_first_load==true" class="form-signin-heading text-center">Please enter the temporary password</label>
								<label class="temp_password_text text-center" ng-show="not_first_load==false" class="form-signin-heading text-center">Please enter the temporary password</label></br>
								<label class="temp_password_text text-center" ng-show="first_load==true" class="form-signin-heading text-center">that you got with the system</label>
								<label class="temp_password_text text-center" ng-show="first_load==false && not_first_load==false" class="form-signin-heading text-center">from administrator </label>
								</br>
									<div class="col-xs-4 col-xs-offset-4" style="margin-top:10px" >
										<div  class="input-group ">							
											<span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
											<input ng-model="temp_password" type="password" class="form-control w-50 p-3" id="li_uPassword" placeholder="Enter temporary password"></p>
										</div>
									</div></p>
								</br>
									
									<div class="col-xs-2 col-xs-offset-5 " style="margin-top:10px">
									</p>
										<button class="btn btn-sm center-block  " style="font-size: 15px; background-color: #ff6699;color: white;" ng-click="validation_of_temp_password(temp_password)">verify</button>
										</p>
									</div>
					   </div>
				   </div>
				</form>		
			 </div>
			 
			  <div ng-show="new_temp_password_page==true">
			 
			    <form class="change_temp_password_div ">
					<div class="font-weight-bold text-center col-xs-10">
						<div class="text-primary">
							<div>
								<label class="temp_password_text text-center col-md-offset-4" class="text-center">Please change the temporary password</label></br>
								<label class="temp_password_text text-center col-md-offset-4" class="text-center">that you got with the system</label>
							</div>
							</br>
							
							<div class="col-xs-4 col-md-offset-6">
								<div class="input-group">
								    <span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
									<input ng-model="new_temporary_password" type="password" class="form-control w-50 p-3"  placeholder="Enter a new temprorary Password">
								</div>
								</br>
								<div class="input-group">
									<span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
									<input ng-model="new_temporary_validation_password" type="password" class="form-control w-50 p-3"  placeholder="Enter password again for validation">
								</div>
								</br>
								<div class="col-xs-2 col-xs-offset-4 ">
									<button class="btn btn-md center-block " style="background-color: #ff6699;color: white; margin-top:10px" ng-click="change_temp_password()">verify</button>
								</div>
							</div>
					   </div>
				   </div>
				</form>		
			 </div>
		
		    <div ng-show="register_page == true" id="sign_up" >
				<div class="sign_up_div col-xs-4">
					<div>
						<label class=" text-center text-primary col-md-offset-6" style="font-size: 30px;">Please Sign Up</label>
					</div>
					</br>
					
					<div class="col-xs-4 col-md-offset-5">
						<div class="input-group">
							<span class="input-group-addon primary"><i class="fa fa-user fa-lg"></i></span>
							<input ng-disabled="Admin==true" ng-model="registration_user_name" class="form-control w-50 p-3" placeholder="Enter user name">
							
						</div>
						</br>
						<div class="input-group">
							<span class="input-group-addon primary"><i class="fa fa-user fa-lg"></i></span>
							<input ng-model="registration_name" class="form-control w-50 p-3" placeholder="Enter name">	
						</div>
						</br>
						<div class="input-group">
							<span class="input-group-addon primary"><i class="fa fa-at fa-md" style="font-size:15px"></i></span>
							<input ng-model="registration_email" type="email" class="form-control w-50 p-3"  aria-describedby="emailHelp" placeholder="Enter email address">				
						</div>
						</br>
						
						<div class="input-group">
							<span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
							<input ng-model="registration_password" type="password" class="form-control w-50 p-3"  placeholder="Enter Password">	
						</div>
						</br>
						
						<div class="input-group">
							<span class="input-group-addon primary"><i class="fa fa-lock fa-lg"></i></span>
							<input ng-model="registration_validation_password" type="password" class="form-control w-50 p-3"  placeholder="Enter Password again for validation">
						</div>
						</br>
					</div>
					
					<div class="col-xs-2 col-xs-offset-6" > 
						<button class="btn btn-md center-block" style="background-color: #ff6699;color: white;" ng-click="signUp()">Submit</button>
					</div>
				</div>
			</div>
			
			<div class="account_div" ng-show="account==true">

				<div class="dropdown" >
					 <a href="#" class="dropdown-toggle" data-toggle="dropdown">
								<i style = "font-size: 75px; margin-bottom:10px" class="fa fa-user-circle fa-lg"></i>
								</a>
								<p class="text-primary" style = "text-align:center;">{{name_of_user}}</br>
					<ul class="dropdown-menu">
						<li><a href="#">change password</a></li>
						<li><a href="#">log out</a></li>
					</ul>
				</div>
			</div>
			
			<div ng-show = "menu==true" id="div-vertical" class="navbar">
			
			    
				<ul>
					
					<li a class="active" ng-click="get_contacts_function()"><a><i class="fa fa-fw fa-user" > </i> Contacts</a></li>
					<li ng-click="calendar_function()"><a><i class="fa fa-calendar" ></i> Calendar</a></li> 
					<li ng-click="settings_function()" ng-show="admin_page==true"><a><i class="fa fa-gear"></i>Settings </a></li> 
				</ul>
			</div>
			
			<div id="info_navbar">
			<!--contacts table-->
				<form id="contacts_div" ng-show="show_contacts"><!-- -->
					<div class="input-group input-group">
						<span class="input-group-addon">
							<span class="glyphicon glyphicon-search" style="color:#003366" aria-hidden="true">
							</span>
						</span>	
						<input  class="form-control-md-6" ng-model="search" placeholder="search...">
					</div>
					<div class="col-lg-20">
						<table align="right" class="table table-hover-responsive"  class="text-center" >
							<thead>

								<tr class="table_head">
									<th>Name</th>
									<th>Status</th>
									<th>Phone Number</th>
									<th>Email</th>
									<th>Address</th>
									<th> </th>
									<th> </th>
									<th> </th>	
								</tr>
							<thead>
							<tbody>
								<tr ng-repeat="contactInfo in contactsInfo | filter:search" ng-init="contactIsEdit = false;">
										<td ng-show="contactIsEdit==false">{{contactInfo.Name}}</td>
										<td ng-show="contactIsEdit==false">{{contactInfo.Status}}</td>
										<td ng-show="contactIsEdit==false">{{contactInfo.PhoneNumber}}</td> 
										<td ng-show="contactIsEdit==false">{{contactInfo.eMail}}</td>
										<td ng-show="contactIsEdit==false">{{contactInfo.Address}}</td>	
										
									<td ng-show="contactIsEdit==false"><i class="fa fa-edit" style="font-size:24px;color:#008fb3"  aria-hidden="true" ng-click = "contactIsEdit =!contactIsEdit;update_contact_function(contactInfo)"></i></td>
									<div ng-if="contactIsEdit" class="form-group row" >
										
											<td ng-show="contactIsEdit==true"><input ng-model="contactInfo.Name" type="text" class="form-control" /></td>
										
										
										<td ng-show="contactIsEdit==true"><div class="form-group">
											<select class="form-control"  ng-model="contactInfo.Status" ng-change="onChange(contactInfo.Status)">
												<option value=''>-- Choose status --</option>
												<option ng-repeat="option in options">{{option.Status}}</option>
												<option >add a new status</option>
											</select>

										</div></td>
										
										<td ng-show="contactIsEdit==true"><input ng-model="contactInfo.PhoneNumber" type="text" class="form-control" /></td> 
										
										<td ng-show="contactIsEdit==true"><input ng-model="contactInfo.eMail" type="text" class="form-control" /></td>
										<td ng-show="contactIsEdit==true"><input ng-model="contactInfo.Address" type="text" class="form-control" /></td>	
									</div>
									
									<td><i class="fa fa-trash" style="font-size:24px;color:#003366" ng-show="contactIsEdit==false" aria-hidden="true" ng-click = "delete_contact_function(contactInfo)"></i></td>
									<td ng-show="contactIsEdit==true"><i class="fa fa-check-square-o" style="font-size:24px;color:#00e600" aria-hidden="true" ng-click = "save_updated(contactInfo)"></i></td>
									 
									 		
								</tr>
								<tr ng-show="get_new_contact_details==true">
									<td><input ng-model="newName" type="text" class="form-control" placeholder="Name" maxlength="25"/></td>
									<td ><div class="form-group">
										<select class="form-control" id="status_select" ng-model="newStatus" ng-change="onChange(newStatus)">
								            <option value=''>-- Choose status --</option>
											<option ng-repeat="option in options">{{option.Status}}</option>
											<option >add a new status</option>
										</select>
										
									</div></td>
									<td><input ng-model="newPhoneNumber"  type="text" placeholder="Phone Number"  class="form-control is-invalid" required /></td>
									<td><input ng-model="newEmail" type="text" class="form-control" placeholder="Email" /></td>
									<td><input ng-model="newAddress" type="text" class="form-control" placeholder="Address" maxlength="35"/></td>
									<td><i ng-click="check_and_save_details()" style="font-size:24px;color:#00e673" class="fa fa-check-square-o"/></td>
									<td><i class="fa fa-times" style="font-size:24px;color:#ff3333" ng-click="cancel_function()"></i></td>
									
								</tr>
								<tr ng-show="show_contacts==true">
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									
									<td ng-show="click==true"><i class="fa fa-user-plus" style="font-size:24px;color:#00cc99" ng-click="add_contact_function() "></i></td> 
								</tr>
															
							</tbody></p>
						</table>
					</div>
				</form>
				
				<div ng-show="show_calendar==true" ui-calendar="uiConfig.calendar" class="span8 calendar" ng-model="eventSources"></div> 

				<div class="modal fade" id="myModalHorizontal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<!-- Modal Header -->
							<div class="modal-header">
								<button type="button" class="close" 
								   data-dismiss="modal">
									   <span aria-hidden="true">&times;</span>
									   <span class="sr-only">Close</span>
								</button>
								<h4 class="modal-title" id="myModalLabel">
									New status
								</h4>
							</div>
							
							<!-- Modal Body -->
							<div class="modal-body">
								
								<div class="form-horizontal" role="form">
								  <div class="form-group">
									<div class="col-sm-10">
										<input class="form-control" ng-model="status_from_modal" placeholder="Enter your new status..."/>
								    </div>
								  </div>
								  
								</div>				
							</div>
							
							<!-- Modal Footer -->
							<div class="modal-footer">
								<button type="button" class="btn btn-default"
										data-dismiss="modal">
											Close
								</button>
								<button type="button" class="btn btn-primary" ng-click="save_new_status()" data-dismiss="modal">
									Save
								</button>
							</div>
						</div>
					</div>
				</div>
				


	
				
			</div>
			
			<div class="modal fade" id="Message_Modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
											<div class="modal-dialog">
												<div class="modal-content">
													<!-- Modal Header -->
													<div class="modal-header">
														<h4 class="modal-title" id="myModalLabel">
															{{message_type}}
														</h4>
													</div>
													
													<!-- Modal Body -->
													<div class="modal-body">
														
														<div class="form-horizontal" role="form">
														  <div class="form-group">
															<div class="col-sm-10">
															{{message}}
															</div>
														  </div>
														  
														</div>				
													</div>
													
													<!-- Modal Footer -->
													<div class="modal-footer">
														<button type="button" class="btn btn-primary""
																data-dismiss="modal">
																	ok
														</button>
							
				
													</div>
												</div>
											</div>
										</div>

			
		</div>
	</body>
</html>